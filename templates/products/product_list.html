{% extends 'base.html' %}

{% block title %}Products - Diet Planner{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1 class="mb-4">
            <i class="bi bi-bag"></i> Products
        </h1>
    </div>
</div>

<div class="row mb-4">
    <div class="col-12">
        <h3 class="mb-3">Supplements</h3>
    </div>
    {% for supplement in supplements %}
    <div class="col-md-4 mb-4">
        <div class="card product-card">
            {% if supplement.image %}
            <img src="{{ supplement.image.url }}" class="card-img-top product-image" alt="{{ supplement.name }}">
            {% else %}
            <div class="card-img-top product-image bg-light d-flex align-items-center justify-content-center">
                <i class="bi bi-image" style="font-size: 3rem; color: #ccc;"></i>
            </div>
            {% endif %}
            <div class="card-body">
                <h5 class="card-title">{{ supplement.name }}</h5>
                {% if supplement.brand %}
                <p class="text-muted mb-2"><small>{{ supplement.brand }}</small></p>
                {% endif %}
                <p class="card-text">{{ supplement.description|truncatewords:20 }}</p>
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <span class="h5 text-primary mb-0">${{ supplement.price }}</span>
                    {% if supplement.is_low_stock %}
                    <span class="badge bg-warning text-dark">Low Stock</span>
                    {% elif supplement.stock_quantity > 0 %}
                    <span class="badge bg-success">In Stock</span>
                    {% else %}
                    <span class="badge bg-danger">Out of Stock</span>
                    {% endif %}
                </div>
                <a href="{% url 'products:supplement_detail' supplement.pk %}" class="btn btn-primary w-100 mb-2">View Details</a>
                {% if supplement.stock_quantity > 0 %}
                <a href="{% url 'orders:add_to_cart' 'supplement' supplement.pk %}" class="btn btn-success w-100">
                    <i class="bi bi-cart-plus"></i> Add to Cart
                </a>
                {% endif %}
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12">
        <div class="alert alert-info">No supplements available at the moment.</div>
    </div>
    {% endfor %}
</div>

<div class="row">
    <div class="col-12">
        <h3 class="mb-3">Protein Bars</h3>
    </div>
    {% for protein_bar in protein_bars %}
    <div class="col-md-4 mb-4">
        <div class="card product-card">
            {% if protein_bar.image %}
            <img src="{{ protein_bar.image.url }}" class="card-img-top product-image" alt="{{ protein_bar.name }}">
            {% else %}
            <div class="card-img-top product-image bg-light d-flex align-items-center justify-content-center">
                <i class="bi bi-image" style="font-size: 3rem; color: #ccc;"></i>
            </div>
            {% endif %}
            <div class="card-body">
                <h5 class="card-title">{{ protein_bar.name }}</h5>
                {% if protein_bar.flavor %}
                <p class="text-muted mb-2"><small>{{ protein_bar.flavor }}</small></p>
                {% endif %}
                <p class="card-text">{{ protein_bar.description|truncatewords:20 }}</p>
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <span class="h5 text-primary mb-0">${{ protein_bar.price }}</span>
                    {% if protein_bar.is_low_stock %}
                    <span class="badge bg-warning text-dark">Low Stock</span>
                    {% elif protein_bar.stock_quantity > 0 %}
                    <span class="badge bg-success">In Stock</span>
                    {% else %}
                    <span class="badge bg-danger">Out of Stock</span>
                    {% endif %}
                </div>
                <a href="{% url 'products:protein_bar_detail' protein_bar.pk %}" class="btn btn-primary w-100 mb-2">View Details</a>
                {% if protein_bar.stock_quantity > 0 %}
                <a href="{% url 'orders:add_to_cart' 'protein_bar' protein_bar.pk %}" class="btn btn-success w-100">
                    <i class="bi bi-cart-plus"></i> Add to Cart
                </a>
                {% endif %}
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12">
        <div class="alert alert-info">No protein bars available at the moment.</div>
    </div>
    {% endfor %}
</div>
{% endblock %}

