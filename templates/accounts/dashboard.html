{% extends 'base.html' %}

{% block title %}Dashboard - Diet Planner{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1 class="mb-4">
            <i class="bi bi-speedometer2"></i> Dashboard
        </h1>
    </div>
</div>

{% if not profile.fitness_goal %}
<div class="row">
    <div class="col-12">
        <div class="alert alert-info">
            <h5><i class="bi bi-info-circle"></i> Get Started</h5>
            <p class="mb-2">You haven't selected your fitness goal yet. Choose your goal to get a personalized diet plan!</p>
            <a href="{% url 'accounts:select_goal' %}" class="btn btn-primary">Select Goal</a>
        </div>
    </div>
</div>
{% endif %}

{% if diet_plan %}
<div class="row">
    <div class="col-12">
        <div class="diet-plan-card">
            <h2 class="mb-3">
                <i class="bi bi-clipboard-heart"></i> Your Diet Plan
            </h2>
            <div class="row mb-3">
                <div class="col-md-4">
                    <h5>Goal</h5>
                    <p class="mb-0">{{ diet_plan.get_goal_type_display }}</p>
                </div>
                <div class="col-md-4">
                    <h5>Daily Calories</h5>
                    <p class="mb-0">{{ diet_plan.daily_calories }} cal</p>
                </div>
                <div class="col-md-4">
                    <h5>Created</h5>
                    <p class="mb-0">{{ diet_plan.created_at|date:"M d, Y" }}</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    {% for meal_key, meal_data in diet_plan.meals.items %}
    <div class="col-md-6 mb-3">
        <div class="meal-section">
            <h4 class="meal-title">
                <i class="bi bi-egg-fried"></i> {{ meal_data.name }}
            </h4>
            <p class="text-muted mb-2"><strong>Calories:</strong> {{ meal_data.calories }} cal</p>
            <ul class="list-unstyled">
                {% for food in meal_data.foods %}
                <li class="mb-2">
                    <i class="bi bi-check-circle text-success"></i> {{ food }}
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

<div class="row mt-4">
    <div class="col-md-4">
        <div class="card">
            <div class="card-body text-center">
                <i class="bi bi-person-circle" style="font-size: 3rem; color: var(--primary-color);"></i>
                <h5 class="mt-3">Profile</h5>
                <p class="text-muted">Manage your profile information</p>
                <a href="{% url 'accounts:edit_profile' %}" class="btn btn-outline-primary">Edit Profile</a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-body text-center">
                <i class="bi bi-bag" style="font-size: 3rem; color: var(--success-color);"></i>
                <h5 class="mt-3">Products</h5>
                <p class="text-muted">Browse supplements and protein bars</p>
                <a href="{% url 'products:product_list' %}" class="btn btn-outline-success">View Products</a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-body text-center">
                <i class="bi bi-cart-check" style="font-size: 3rem; color: var(--info-color);"></i>
                <h5 class="mt-3">Orders</h5>
                <p class="text-muted">View your order history</p>
                <a href="{% url 'orders:order_list' %}" class="btn btn-outline-info">My Orders</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

